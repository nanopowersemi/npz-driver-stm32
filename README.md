# nPZero STM32 Host
![](/Documentation/nPZero.png "nPZero STM32")<br>

This repository provides demonstrations on how to use the **nPZero Driver API** with the STM32 microcontroller platform, focusing on setting up code examples for peripherals and the ADC channels.

## API Driver Overview
The **nPZero Driver** provides a comprehensive API for interfacing with the nPZero IC. It can be used on any hardware platform to interact with the IC, offering a register-level interface that allows users to efficiently control and manage power-related functionalities in their applications.
The driver also includes a Hardware Abstraction Layer (HAL) for I2C operations, which can be customized to match specific hardware configurations, making it adaptable across various platforms.

## Executing Code Examples with the nPZero Driver
This project utilizes the **nPZero Driver** to execute the following functionalities:

- The Peripheral Mode examples demonstrate communication using I2C:
    - These examples show how to communicate with the temperature sensor connected via the I2C interface, which is bundled with the nPZero Gen1 Development Kit (DevKit).

- The ADC examples illustrates how to configure the internal and external ADC channels.

These examples demonstrate the necessary procedures for initialization, configuration, and data exchange required for sensor interaction using the **nPZero Driver**.

## Hardware Requirements
This project is designed to be executed on the STM32L053C8U6 processor. In order to run, flash and debug the code you will need a debugger such as the Segger J-LINK or the ST-Link, connected to the Debug connector (J1) on the STM32L053C8U6 MCU Host.

You will also need the following PCBs which are included in the nPZero Gen1 Development Kit (DevKit):

- nPZero DevBoard
- STM32L053C8 Host MCU (Bundled with DevKit)
- Temperature sensor AMS6212 (Bundled with DevKit)
- Segger J-LINK Debugger

## Setting Up and Developing for the STM32 MCU Host

This section outlines the essential steps to develop, program, and debug an STM32 MCU host using STM32CubeIDE and to set up UART communication for monitoring.

1. Importing and Setting Up the nPZero Project in STM32CubeIDE:

	- [Download STM32CubeIDE](https://www.st.com/en/development-tools/stm32cubeide.html)
	- Import nPZero Project into STM32CubeIDE:
	     -  Go to File > Import > Existing Projects into Workspace
	     -  Click Next
	     -  Click Browse and navigate to the root directory of this project.
	     -  Ensure that the root directory is selected and the project appears in the "Projects" list
	     -  Click Finish
	- Configure Code Examples:
	     -  Use the nPZero Configurator to configure code examples for peripherals and ADC functionalit
	- Modify the Main File:
	     -  Open the `Core >Src >main.c` file from Project Explorer view in STM32CubeIDE
	     -  Insert the code generated by the nPZero Configurator into the `main.c` file in the project directory
     - Compile and Flash the STM32 MCU Host:
	     -  To create a run configuration for the nPZero project:
			  -  Right-click on the nPZero_STM32_Host project name in the Project Explorer view and select Run As>STM32 C/C++ Application
			  -  The Edit Configuration dialog will be opened
			  -  Go to Debugger Tab and Select SEGGER J-LINK as debug probe
			  -  Select your desired Project Setup and click on Apply and OK
	     -  Once configured, you can start a programming session
2. Setting Up UART Communication:
     -  Start a terminal emulator(e.g., PuTTY) and connect to the used COM port with the following UART settings:
		  -  Baud rate: 115200
		  -  8 data bits
		  -  1 stop bit
		  -  No parity
		  -  HW flow control: None

## Generate Doxygen Documentation
Run ``doxygen Doxyfile`` and the documentation will create a html folder which includes a index.html file. 
This is the file that consists of the documentation. 